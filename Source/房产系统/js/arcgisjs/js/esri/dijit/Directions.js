/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"url:esri/dijit/templates/Directions.html":'\x3cdiv class\x3d"${options.theme}" role\x3d"presentation"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"_widgetContainer" class\x3d"${_css.widgetContainerClass}" role\x3d"presentation"\x3e\n        \x3cdiv class\x3d"${_css.stopsContainerClass}" role\x3d"presentation"\x3e\n            \x3ctable class\x3d"${_css.stopsClass}" data-dojo-attach-point\x3d"_dndNode"\x3e\x3c/table\x3e\n            \x3cdiv class\x3d"${_css.clearClass}"\x3e\x3c/div\x3e\n            \x3cdiv class\x3d"${_css.stopsButtonContainerClass}"\x3e\n                \x3cdiv role\x3d"button" class\x3d"${_css.stopsAddDestinationClass}" data-dojo-attach-point\x3d"_addDestinationNode"\x3e${_i18n.widgets.directions.addDestination}\x3c/div\x3e\n                \x3cdiv role\x3d"button" class\x3d"${_css.stopsOptionsButtonClass}" data-dojo-attach-point\x3d"_optionsButtonNode"\x3e${_i18n.widgets.directions.showOptions}\x3c/div\x3e\n            \t\x3cdiv class\x3d"${_css.clearClass}"\x3e\x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv role\x3d"presentation" class\x3d"${_css.stopsOptionsMenuClass}" data-dojo-attach-point\x3d"_optionsMenuNode"\x3e\n                \x3cdiv class\x3d"${_css.stopsOptionsCheckboxesClass}"\x3e\n                    \x3cul\x3e\n                        \x3cli class\x3d"${_css.stopsFindOptimalOrderClass}" data-dojo-attach-point\x3d"_findOptimalOrderItemNode"\x3e\x3cinput tabindex\x3d"0" data-dojo-attach-point\x3d"_findOptimalOrderNode" type\x3d"checkbox" id\x3d"${id}_find_optimal_order" /\x3e\x3clabel for\x3d"${id}_find_optimal_order"\x3e${_i18n.widgets.directions.findOptimalOrder}\x3c/label\x3e\x3c/li\x3e\n                        \x3cli class\x3d"${_css.stopsReturnToStartClass}" data-dojo-attach-point\x3d"_returnToStartItemNode"\x3e\x3cinput tabindex\x3d"0" data-dojo-attach-point\x3d"_returnToStartNode" type\x3d"checkbox" id\x3d"${id}_stopsReturnToStart" /\x3e\x3clabel for\x3d"${id}_stopsReturnToStart"\x3e${_i18n.widgets.directions.returnToStart}\x3c/label\x3e\x3c/li\x3e\n                        \x3cli class\x3d"${_css.stopsUseTrafficClass}" data-dojo-attach-point\x3d"_useTrafficItemNode"\x3e\x3cinput tabindex\x3d"0" data-dojo-attach-point\x3d"_useTrafficNode" type\x3d"checkbox" id\x3d"${id}_stopsUseTraffic" /\x3e\x3clabel for\x3d"${id}_stopsUseTraffic"\x3e${_i18n.widgets.directions.useTraffic}\x3c/label\x3e\x3c/li\x3e\n                    \x3c/ul\x3e\n                \x3c/div\x3e\n                \x3cdiv class\x3d"${_css.stopsOptionsUnitsClass}"\x3e\n                    \x3cul\x3e\n                        \x3cli\x3e\x3cinput tabindex\x3d"0" id\x3d"${id}_use_miles" data-dojo-attach-point\x3d"_useMilesNode" name\x3d"${id}_units" type\x3d"radio"\x3e\x3clabel for\x3d"${id}_use_miles"\x3e${_i18n.widgets.directions.units.MILES.name}\x3c/label\x3e\x3c/li\x3e\n                        \x3cli\x3e\x3cinput tabindex\x3d"0" id\x3d"${id}_use_kilometers" data-dojo-attach-point\x3d"_useKilometersNode" name\x3d"${id}_units" type\x3d"radio"\x3e\x3clabel for\x3d"${id}_use_kilometers"\x3e${_i18n.widgets.directions.units.KILOMETERS.name}\x3c/label\x3e\x3c/li\x3e\n                    \x3c/ul\x3e\n                \x3c/div\x3e\n                \x3cdiv class\x3d"${_css.clearClass}"\x3e\x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"${_css.stopsGetDirectionsContainerClass}"\x3e\n                \x3cdiv tabindex\x3d"0" role\x3d"button" class\x3d"${_css.stopsGetDirectionsClass}" data-dojo-attach-point\x3d"_getDirectionsButtonNode"\x3e${_i18n.widgets.directions.getDirections}\x3c/div\x3e\n                \x3cdiv tabindex\x3d"0" role\x3d"button" class\x3d"${_css.stopsClearDirectionsClass}" data-dojo-attach-point\x3d"_clearDirectionsButtonNode"\x3e${_i18n.widgets.directions.clearDirections}\x3c/div\x3e\n                \x3cdiv class\x3d"${_css.clearClass}"\x3e\x3c/div\x3e\n            \x3c/div\x3e\n    \t\x3c/div\x3e\n    \t\x3cdiv class\x3d"${_css.clearClass}"\x3e\x3c/div\x3e\n    \t\x3cdiv data-dojo-attach-point\x3d"_errorNode" role\x3d"presentation"\x3e\x3c/div\x3e\n    \t\x3cdiv class\x3d"${_css.resultsContainerClass}" role\x3d"presentation"\x3e\n        \t\x3cdiv class\x3d"${_css.routesContainerClass}" data-dojo-attach-point\x3d"_resultsNode" role\x3d"presentation"\x3e\x3c/div\x3e\n    \t\x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e'}});
define("esri/dijit/Directions","require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dijit/a11yclick dijit/_TemplatedMixin dojo/keys dojo/has dojo/on dojo/mouse dojo/dom dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/dom-attr dojo/query dojo/number dojo/i18n!esri/nls/jsapi dojo/text!esri/dijit/templates/Directions.html esri/dijit/Geocoder dojo/dom-construct dojo/promise/all dojo/Deferred dojo/dnd/Source esri/kernel esri/graphic esri/units esri/InfoTemplate esri/SpatialReference esri/layers/ArcGISDynamicMapServiceLayer esri/geometry/Point esri/geometry/Extent esri/geometry/Polyline esri/geometry/mathUtils esri/symbols/PictureMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/TextSymbol esri/symbols/Font esri/dijit/_EventedWidget esri/tasks/FeatureSet esri/tasks/RouteTask esri/tasks/RouteParameters esri/toolbars/edit dojo/uacss".split(" "),
function(D,z,e,t,B,s,L,x,M,g,E,F,N,m,k,n,u,C,h,O,G,l,P,q,Q,R,v,r,H,S,T,U,V,I,W,w,J,X,A,Y,Z,$,aa,K){z=z([Y,L],{declaredClass:"esri.dijit.Directions",templateString:O,basePath:D.toUrl("esri/dijit"),_eventMap:{load:!0,"directions-start":!0,"directions-finish":["result"],"directions-clear":!0,"segment-select":["graphic"],"segment-highlight":["graphic"],"stops-update":["stops"]},constructor:function(a,b){this._css={widgetContainerClass:"esriDirectionsContainer",stopsContainerClass:"esriStopsContainer",
reverseStopsClass:"esriStopsReverse",addStopsClass:"esriStopsAdd",stopsClass:"esriStops",stopsRemovableClass:"esriStopsRemovable",stopsButtonContainerClass:"esriStopsButtons",stopsOptionsButtonClass:"esriStopsOptionsButton",stopsAddDestinationClass:"esriStopsAddDestination",stopsGetDirectionsContainerClass:"esriStopsGetDirectionsContainer",stopsGetDirectionsClass:"esriStopsGetDirections",stopsClearDirectionsClass:"esriStopsClearDirections",stopsOptionsOptionsEnabledClass:"esriStopsOptionsEnabled",
stopsOptionsMenuClass:"esriStopsOptionsMenu",stopsFindOptimalOrderClass:"esriFindOptimalOrderOption",stopsUseTrafficClass:"esriUseTrafficOption",stopsReturnToStartClass:"esriReturnToStartOption",stopsOptionsCheckboxesClass:"esriOptionsCheckboxes",stopsOptionsUnitsClass:"esriOptionsUnits",stopClass:"esriStop",stopOriginClass:"esriStopOrigin",stopDestinationClass:"esriStopDestination",esriStopGeocoderColumnClass:"esriStopGeocoderColumn",esriStopReverseColumnClass:"esriStopReverseColumn",stopIconColumnClass:"esriStopIconColumn",
stopIconClass:"esriStopIcon",stopIconRemoveColumnClass:"esriStopIconRemoveColumn",stopIconRemoveClass:"esriStopIconRemove",resultsContainerClass:"esriResultsContainer",resultsLoadingClass:"esriResultsLoading",resultsPrintClass:"esriResultsPrint",resultsSummaryClass:"esriResultsSummary",resultsViewFullRouteClass:"esriResultsViewFullRoute",resultsRouteNameClass:"esriResultsRouteName",resultsRouteButtonContainerClass:"esriResultsButtonsContainer",routesContainerClass:"esriRoutesContainer",routesClass:"esriRoutes",
routesErrorClass:"esriRoutesError",routeClass:"esriRoute",routeTextColumnClass:"esriRouteTextColumn",routeTextClass:"esriRouteText",routeLengthClass:"esriRouteLength",routeOriginClass:"esriDMTStopOrigin",routeDestinationClass:"esriDMTStopDestination",routeLastClass:"esriDMTStopLast",routeInfoClass:"esriRouteInfo",routeIconColumnClass:"esriRouteIconColumn",routeIconClass:"esriRouteIcon",infoWindowRouteClass:"esriInfoWindowRoute",routeZoomClass:"esriRouteZoom",esriPrintPageClass:"esriPrintPage",esriPrintBarClass:"esriPrintBar",
esriPrintButtonClass:"esriPrintButton",esriCloseButtonClass:"esriCloseButton",esriPrintMainClass:"esriPrintMain",esriPrintHeaderClass:"esriPrintHeader",esriPrintLogoClass:"esriPrintLogo",esriPrintNameClass:"esriPrintName",esriPrintNotesClass:"esriPrintNotes",esriPrintLengthClass:"esriPrintLength",esriPrintDirectionsClass:"esriPrintDirections",esriPrintFooterClass:"esriPrintFooter",esriPrintStopLabelClass:"esriPrintStopLabel",clearClass:"esriClear",dndDragBodyClass:"esriDndDragDirection"};this.options=
{map:null,autoSolve:!0,minStops:2,maxStops:20,theme:"simpleDirections",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",directions:null,showReturnToStartOption:!0,showOptimalRouteOption:!0,returnToStart:!1,optimalRoute:!1,routeTaskUrl:location.protocol+"//route.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",routeParams:{},stops:["",""],geocoderOptions:{autoComplete:!1,autoNavigate:!1},stopsInfoTemplate:new H("Location","${address}${error}"),segmentInfoTemplate:new H("Route",'\x3cdiv class\x3d"${maneuverType}"\x3e\x3cdiv class\x3d"'+
this._css.routeIconClass+" "+this._css.infoWindowRouteClass+'"\x3e\x3cstrong\x3e${step}.\x3c/strong\x3e ${formattedText}\x3c/div\x3e\x3c/div\x3e'),textSymbolFont:new A("11px",A.STYLE_NORMAL,A.VARIANT_NORMAL,A.WEIGHT_NORMAL,"Arial, Helvetica, sans-serif"),textSymbolColor:new B([255,255,255]),textSymbolOffset:{x:0,y:10.875},fromSymbol:(new w({url:this.basePath+"/images/Directions/greenPoint.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4OTI1MkU2ODE0QzUxMUUyQURFMUNDNThGMTA3MjkzMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4OTI1MkU2OTE0QzUxMUUyQURFMUNDNThGMTA3MjkzMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg5MjUyRTY2MTRDNTExRTJBREUxQ0M1OEYxMDcyOTMxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjg5MjUyRTY3MTRDNTExRTJBREUxQ0M1OEYxMDcyOTMxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iVNkdQAABJlJREFUeNp0VltvG0UUnpkdr72261CnCQWEIA9FqOKlqooARUKCtAUhoA+VoBVRhfgFXKSKJ97goRL8ARCIclGgL0VUkBBAoBaVoggEQQVSAhFS06SJje3Y3t25cc7srL3YjddHs3N85pvvfOfMyJRs83n8o+P7POI9yQibooTeBa68ISbSRv+hifpCGHX2s6dnfrrRWjroOPzB0T0+zZ0q8uDRSrniF/MB8X2fADhR8IRRRDphh7Q6rbgtOucU0Sdnj59Z2hb00PtHD+Zp/p2x6uitO4o7iLYP8DMafjVE2wXUboALm50W2ahtXO3q8MTX02fnh0Affu/IkSAXnL55dLzMPU6kURZMIZQhFtRk2VBKcpQTIQVZ21hrdUX4zDcnPv2kBzr59mP3BLnChfGx8YrHPKIAELSzMPhQk+ydzpOvIYwywjFeK7K+vt6IlZw8/+y5RZ4gm9eCUrGCmkUyBkCV0Sd5UlBtTLIhRWQE9ixwsVwe6dY3X4WwJ+j9bx7a7/v5i6O7qlxisFZJAvBF7Rjty56CWlmszilj6BNgXd+syTCO7uNK62nuezyUkWWASTPHDtOjbgOHkJTOsbXAyJhIC+rlODdROM211gcQKBJxoh+EKAs4AGqybHVfBvdICNIU/IDHYbcJiS6le4wwbW1B9UDXJcg9QBxtbglh1BlAJzjoUxIGQZFRwtAypgnjtH0spDG9MWVs34xrN5uBLnEoTKQUgDLgZ6hliLunBaIDhy4LYhyotptZlphGyLUhfyspxxj3AIpaVqikdgyzoGn7p0xNj71rNamweCscWC0qoQ8YRm3K2OgpeFoc+j9FSUYKB+4OgxIK4RcZUJ6RsUgqCrShxWzza9035aw/lzYGY5P4xFSMR5vMcFpm87opL4HjXsr76dLhC2xYhgx3I0BfoS7RCp+3K/e8vn+Ke2zWK+cYofQG9yMlw1eK1aAni9oSWil9eOmFhXkPnbXZ1eXqwVsirfQU9Vynm75lymLbxvpSP4yqI4iR5uWlFxdOI56Xbro5t3qhOrW7ZmL1EOFwp7k6pRXuWaZgBmuwJSIl1fNXXvrxjRTLy2ZTm1v9YeTBXedNbCYZZ1U4pdt+NGiomuKKEvKp5ZM/f5z9zctc1vju1b9cv5q/M/icBd4+KNztlnGWKfYjAMqm+K7zZ/PYP6d+X3TrafbmR8N71QcrOPMLd5RGdj838WFup393orNLWRki6vFv197661i40m6AKwYLneG79BzDPNhNYFWwnfguGyKgPl32bwseoTnKekVpS9n49vorWwv1JsSVwAJHCHcW2Agsk3rBBZXBihhcn11biTfDixpPik1bEZyj34EVXXzJrUccWwrbZo5+B6ztRpvO1kLjjO5qW3YccZ5JeTAecQxqqV0Q6hM5KVIrNL5a/77yQPUyLbK9qiMv49zFhW6MMnPE0dwxlQ48ckXDNHJOq0C2xByreHtxhPk1sK4DEI5dut7+QWCZCyj9MXKLWmD/gl1Xtfhd6F2CI86dv+XiIrdOpeeCDd0VyW7KGbLptn9p/mrgNsIxwzKN0QO3IvlPgAEA3AQhIZtaN54AAAAASUVORK5CYII\x3d",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),fromSymbolDrag:(new w({url:this.basePath+"/images/Directions/greenPointMove.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzU5RTBFMjk2QzlCMTFFMkI3NTI4NEEyOTA0NjEyMEYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzU5RTBFMkE2QzlCMTFFMkI3NTI4NEEyOTA0NjEyMEYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NTlFMEUyNzZDOUIxMUUyQjc1Mjg0QTI5MDQ2MTIwRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NTlFMEUyODZDOUIxMUUyQjc1Mjg0QTI5MDQ2MTIwRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkWg288AAAVnSURBVHjadFVrbBVFFD4zO3fvo7e9baEBIUohQBQRRWwQhJDwLBIRE4yAEmPgh4l/NGrqP0wkIhJ8JYYYfCAqBuGHkBgoIK9QIzVEAiXYQoHGpi2l9NrXvbs7OzOe2Z29vRTYm9OZOXvmm+9858yWwH2e535ZN9MC63kKdDEBMhVdcQXKlUq2SBBHuRIHDq3Ze/5ee8lIx7I9q6fYJLYtxZLLy9JldiqeBNu2AcFB4M9xXcg5ORjIDXhDPPebAFlXv27/lfuCLv1p9ZI4ie+qqhw1rjRVCjL4KZjMJsAUVg0t/nW4wm8EB+iN/bkB6Ont6chL59UT6w8ci3CsaLLox1WrErH43jFVVaNisRg40gVPeDDZngBL0vMhw0phkv0Q9PBeaPc6wVMcbBaDRDJR6jj5F8avnHSp7deWZo1F9Z95362YTsH6PlNenkatYJDnIMfzkPMdeDazECzLKtiK8kXgcJTAywMKAD5KUl5ZUWoRa7fG0Xgs1EBtSZakyrRmru+BRODo2dH1AyRpAjaOWws7O/ZAXjjgYgaKKAClgBILGLUglU5n8tnbH+KWlWzO10tnUcuqZXGKzPKgpAilJhBo1+F2hjohy9b8dTwQe0Bh/aUM/Ao4cIlZ2BQYo8trdi6aRfHlemZbzPFRQ7QnMzPgi+mbwRc++NIHjiPHkTGGPhH4fDxYoH352BaoKX8CmbuBWTHGlFLrmZSyRlfY5R48M7oGNlSvCxjEUBmdJjGsNVN9EPJEthLiKIn2bax+GaRUcKbnLEiC3YJ4TCg5Ec8GIiTMr3o6CAy0fOrjOxuaEPh29mf3vCgLxsyBkzcbAp0RdCLSlSVcaVACJ7obYMaoaUHgpvNbC22sAd9//F30hQcprSuOH8ysC9Ynus4EEmFBdBYlDAvjCkyLUArHO05jNQHefPR1uJi9bG4HKRSqCX0aLgLVvk+adsDRjlNByaQunlQOQzluCN+voszC20Ogvv0kHG0/VWAYgQaF0mwKTBUsr18TzANAHKWPBVSyjSLhJsHDFtH9KaUIq4up6FGnFbfsgFXcihfeBfE413vCvejjQsM3kUc+n72MMnKYpe0CK0KG02548dBdhZm7r9YwBgiFCEd/gIMSqpaSND0mPdEovLD3tC5CDNvmxu13XFO9Lrw38YG5yJKLRo1n3TrYriqWPXADW+oVEqNEmVOjX3P2KnQOdUMmUQZfXdgFB1sPF96FVMPCiRyXKMNrzW80thY+fVO3z6ojMfKRlWRB+iOadHiuonSjNYDI46Xg6r2Wt89tvePTd/tIZ0Pl4rG9yhMLgRGmJVVmszJsolaKABW2jhjkrvDFW1ff+fvTu76n+uk90vlXZsHoM8pT8yijlYTCfR+pO6afXxXcf+la3YV9xe+sov8Aem5lf+/uiFcnD9OkNZMw8mDAuJip7kcE9Pv5H7nW/rX/bmtuMvtJ8b8TYr6rNlrCmJ2YUJIZu2Hiz7EK+2FiDWuKLQM86/3T9c31tU7bUB+6PDTHmJ77lmEYRytHq0Sr0HO/jyeJTa7Z45O1WEAaXU8x5Pt9p29tGjyX7ce4ErSkIaRP5miCFqWeMEFptJQOztbfbPNuO39KfVOCtAXotfYbsJSJLzH7NU5QCl1MYejn0IbMGKQzeK5vv8zLoOx61OuilEfGaxyltZQmSOvjGikiS/Qd7z5bNrfyMknRaSLnX9ZrE+eY0S1aaxzJDFPfgLumaFbw8Q+1SuKdPkLLrGl6xHUXWt4AcMMu2q9N0eF7UXjpmk0DaP+h3RK93m7sXdCjXhv/gIlzzT4R3YuR7a3MacKYZpMfuth/SeFHQ49FLKMYWXxr9fO/AAMAeko3KTmnLXwAAAAASUVORK5CYII\x3d",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),stopSymbol:(new w({url:this.basePath+"/images/Directions/bluePoint.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowRDNGRjhFQzNDMDcxMUUyQTlERUFFMkE4NTNDNjgwMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowRDNGRjhFRDNDMDcxMUUyQTlERUFFMkE4NTNDNjgwMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBEM0ZGOEVBM0MwNzExRTJBOURFQUUyQTg1M0M2ODAyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBEM0ZGOEVCM0MwNzExRTJBOURFQUUyQTg1M0M2ODAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+G7OGVQAABIpJREFUeNqEVE1oXUUUPvPz7vvPHy9FIi4KWiS6KSW4UHBToUXwb1ewCILLrhTEiLizi+JKd25iFaUiBYWCmGy6abUIukitVBGLkIZE4stLXt79mZnjOTNzk9vXFO/jvJk795xvvnO+MyPm37sO/CRSgRICQApoaFoQ8rgGfFFKOCnAHaOVOjrInBC3jRXLxsE3AO4XgwLy3AIKBAfosTTc/zxGdqGt8fRkt5W0mnWoJzUQ9KNQyLJidriXPj0YjhZ3UrhCvm+T/V4FGAd9rqXtUm96aq7baQESiwIR8hQILrAAUYNmJ4Fmu5s0d4cv/7PVfyoH8Rp9WTkM9KVGIj/r9XqdWqJhN6d0CNC5ABYhaaMwSipTrd6C3mwyZza2Lo8K8yotf1sFfVIp/HRyZrrDNcoyC5bAqIZUKyIXgXjuLL0IT5mAAWqkw/TMdDff2LxIIc/Qh1VtqOI1Kc63Wt0JEgBGNjAUFMC6oQljyZLxnZ+zLATMzAi93elOUik+MIgvMNMTSqlTMqnDsHAhXSYjuREEN8N+7h7QcUlo5A1dAFY0V0kDtFKnjTEntEU8K+sNnZrozCy5ZsxChHn1cRHcUkahEg64ZJLmqtnQONg9qxFxwaGEjMqADBhzlRTBYvCrGBPKs42sPXvyVbyOiuruFpjpUSMU0HahY4gdp+w4dYdw2ONKYAxz3tJa3l3x+lFNq+3CMUMXWFEqXnER2PiNZGTpDkB9JzBTUQpIP+v4W5uYOsqc1UavJEF6MAYPzLmAByx9n3qRgh+6uAmGrqGuSDVK8Zd1ZlbSSWFZ/PGPWguAe4QqG98zi+0VrNyADrIUdzTttOpssYBC+5QZhOspKmjlFMc2YHZY2YxwuINWJal1yRWpPzZhR06D+/XAbLTqu/cJlQyxrIFJWZtL0jV7K7YoblhTgKucGKr5A81Fn1J9Nh9POIwnfbyAd1226xAqP3lgEG1/beznM0h3HOMwXmwWWHE2XzR729RvNtxOhxhW5taW5aDLJx2QSMVief3ty3HkzRU+7Ofo74JsTtS5kf/3QSIwGmQE/Bax+3jjw5P3CLsv9My5K89KXftEtiYfFSp5IJ4zOeBo+w9nije2Pnr+arU5VKVreK5GN75Y0w/Pf0dsj9PV8wjI+xkjA+5tXcv//vlMf+n11Rgvqi0o4mXNtBrREj33xOTEK+e/VFMPPQ5SVymC7a//Nrj8zhmzdnObVnKyNBrPjYoM62RTZDNk0zx3O5tN0PU/5ZFjp6DWkKHJSaBh36Q/ffV+/uvygJbaZM1IiMkVpfpl6o3o1CFrsfPo2tIdt732A9osHEYa+Z3XI1gr+rdjvCrvH4xXBtPfIxvG0aeT31r+GrOhP7888nsl5XF/xkEZDwc7cX02yO6Srcf51uj65z+6dPsWi8Mjv/N6/L4e/TdiPOM4HZmaCJ5F0TiNWqxVE0f977EzO89jBBpFgCKyK+NdyRQqJTARmIN2yPpkm/bfuxe5njzye1zfiX5ZjLNlr8rxFizvk2jMZlTcvnoTCwM8VliWPm7sVoT/BBgAPp8JxKgcaMoAAAAASUVORK5CYII\x3d",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),stopSymbolDrag:(new w({url:this.basePath+"/images/Directions/bluePointMove.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkQ5MDM5MjY2QzlCMTFFMkI0NTE5QUY4QjQzREJFODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkQ5MDM5Mjc2QzlCMTFFMkI0NTE5QUY4QjQzREJFODIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2RDkwMzkyNDZDOUIxMUUyQjQ1MTlBRjhCNDNEQkU4MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2RDkwMzkyNTZDOUIxMUUyQjQ1MTlBRjhCNDNEQkU4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmssHYwAAAUwSURBVHjahFZtiFRVGH7PuR8zc3dmv9odzazc0C0sEBEriohiKzcjy1AQ8k/QT8lK0goJ+pGWGET9CPpjFoYigomypoj+0VrCPlhTVw0t2JVdWWd3dubOnXs+et9zz6zX2aK7+95z3nPf85zn/Tq7bPHWM0CPzx1wGAPgDLIuLjC+1AW9inPoY6B6cSWjFUSKsWEh2TGh4CCA+lVoBvW6BM00KNAGy4XZzyKUHS2u7m8rBH6Qy0DG94DhD26FKIq7K9Xa41OV8L1yDQ6j7WaUS2kA3gT4TODKk8WOwqq5c4t+NihADB7cG9Sgf95NWIAj6bl8K8wpFv1iZ+Fln4mTuK8vDZJm+lLW5990dXXlPd+F6Tq6ozUsuSOCFxZUjUFPexXQUzg77gPHMHmZALq6/XlibOJAGItX0eT7NNOHHEd/3dbZkacYTUcSKri7iuOaRRE4jjMja3sjCGP8jt/KaCPRvqOzo+Aw2E04hqnAiHucbQuCQismAEKZMGR4HOVt+2AOAk/DW8sF7Bx0oSqYYas1pYUZVi5msyVfaLsxUfpIaP0iub8MGazgfgYqsQKlMIMaDChH1L/KdDYzLC/cZOa7ETxQqwQYWYLjZ8F1nH4hxDIutV7PM1m3JjTUUR6bD7BntQPoAIqGWCbiui4IHNEEqwDMfO8rLjxxD0CEi7TfyWVddHI9vvRypTl+UPB0jwNvPOLZuhVQk0kI8NcwFVqg22CY5ryE/cZHHdRjOHFVYNgcrFe13EWmPYI5QBT67vOMIT171wa31RpD9IPr/q2sAZ7F1hi4ItCIDtA9LsK3xHgyYwqOXolh2fyMMdx4pGwYJoAAn/YX4M0jJsCGLSYdPnu+YPSBSyFywvhKzImGFmSqIood4xoOD0cGYetTrXB2JJ4BBOv+2dHYANJpGDaz9uGJKTh0MTI6VQ1WRc3VnF2VSnRz5plMHrqIvTdcSwCtmNrDREmtbzFFefjLsWQO1PdUDdjInF3jyHpIyRgkspVYIhJdoMyS3sh+1k2SksXkCKWtrTa2Zo/SCVPEQXWI3bnpxHPM8QacoP1WUlIML7yzcFZi7v/kcsI4tUZzWS3hK17BVa7ruIzjQSlisHVvXEESRrYcGb+tTUlX1obsG2L2Iw7huWY/g/dZNH2UB+28+f7aP1Qy3bVmSTvs+61k9DQ7M1KH1cqKcNBUsjlbfwdVvYHuqs3gZLbzbB5Bbr8RWZObDaDGiqpNI1S0RQP/mAddt+yLbx+nZt+Arx0815qhQv7fR0tQ4VSklNyENL4Y29k3i4TROzccfpK73lc8aFvIHP8/8ZSogw4nLysRvz7x+cpT6bw5KQ9p7oSDe0bcuxYPINulePXcDXw2Y02A1YnT9b9/WVfa9dpQU8HMKJQwopW14rvzHmxrXb3tO6d97gPA3TRFkKXrF6YOvLtOjJybxJU6Ss0KzYVjGVLDU6F2onTQXJXHc+Bm/uTF3hXgZbmGpDVlpSRqP+/7oP7HsSlcakHJWUJEjnpb8pTrWWuUR6ErKhee3nVNTY78qGVkQkYj6bRuwQJr32L3O5Dc70kzWPr0F65iR+NO/fyx/TqqaHOJ4Eh6yuVme8LR3DYHGVF8xlBGUa7b+UR45tufVG3yPCWHRtJp3X6/bu3H7H7CUa5lKix4ZJNGbng2Vjkdln7Q+e7FNFqg0ALEll1jv2owhVQIhAWmTXQjU0+Oy5ujuymeNJJu18vWLrL7ZKNWm/9DmblPrBCbMB4+dU7HAmhMsWzYqKYLC/4RYACkZdX+YS9hNAAAAABJRU5ErkJggg\x3d\x3d",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),toSymbol:(new w({url:this.basePath+"/images/Directions/redPoint.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNEZDQTg5MTE0QzYxMUUyQURFMUNDNThGMTA3MjkzMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNEZDQTg5MjE0QzYxMUUyQURFMUNDNThGMTA3MjkzMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg5MjUyRTZBMTRDNTExRTJBREUxQ0M1OEYxMDcyOTMxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI0RkNBODkwMTRDNjExRTJBREUxQ0M1OEYxMDcyOTMxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pmgrrgAABHNJREFUeNqEVU2IHEUUflVd3fO/P3FWRPAQ0EVWL2FZFBS8REgQXD0GDILg0Zsgbg7ezCFXb15iFCUigkJAzF5y0RgQPUyIRBFz2SxusszO7uxMd1e953vV1TM9m6gF31S96qqvvvdTNerH9RWQFtUSUCYCRWwkddAAJ8iYdVD6JIJa5tkaAKUK8bZCexWc/QYJflXO8jADcsRAz2XgwfYU4wI1Wqebnfmk1mhCnNSYWwFZB3meLo0Phy+M9gcbcLh/hde+x/i9SnCU9GWXNC8udLuPN9sdYBo+PQcYsxIivyDmLmk2oNNsJMNB4/X+/XvPKZu9yZ82H0b6mo7rn3aXum1jYqDDAyBEJitcgkDKA/+rlIZmLYaEBezu2K/taPQGT39bJX2WVPTJ4tx828coTZnQFQRCptSE2B9STjGxYgGLC4udnSy7BA5f5NmeQSZRcXy+02rOKbJAo5FXyDsKqFlSD/6O3CsZRxp0ZKDTas33x/c+JGtfFaWrURSdqvFHPBwWhJ5DsRDt1UzaRCmDM83BAZULcQR1HUFkzGlr7aoh587WtTaUjv3igrQgJNRTlWXzXkgCOTwcIpTD2Vs5nInNAdFZw1ldY42AWeozrLzLvI1JJRmeVFAmqlSLQYDYIEJYqfA4WhOlxyPLsdQhL56ECWWTJ62onBQAToiLsZzrIPJn4HHDdovyHFCrEMciOQV5KKcJM01DMFFMRTjYxiKJLYPWpSRKhcTHUQiwIC8KcjamvgKguAyEwUZvyzVFpLFRSH9Z65Zizr4vESjJS8KH+F+WFk1VinrHqpnvDpcU9XKHawZKlzkEhLNk1TqtHEAz5AC58zHuac7W5bHF4EVwwbtRAZePx4yNfq3fE/YKD5K6rLsRbubO3citmyTA9+j+A/gAZH+OeEP4pJAcB+PcAc/4U0u4CsIlmtqzEPX71gf1nPCVd3Azc7ixl/Fjwq5R6dpRhPAUISrC4RiDjFU62iifv0k2Np9/VMrzHa6kC3NG1yIF/9tYNAwsps7hu/ywfHTy+t8zVT3J85XVYy/FWn88H+snE/3vzOwZ7Fn6g6P29is/716r3De+rtMrI+Po87ujrZWW+Y7VnkgUPBGV5VlBxhJ3c/rhl73szFu9fm/6Tk7JVHisE0Y9IHmmbebPL8998VgSPW0qgi2Tbmfut/dvD87cPLB7IpoxDpCxjYJC/qeEBcYxxqKMdzJs1BT8udzQp+r8Dhd3naCfO/vl9viDq/ezAa9rMRpBkBydl9kvXa+HRW1GUxZf3Brd2UrxeuqKApdebJkPZM2wvhX2RxCedfK1Wsg/ZAxD791hRV8NnX80QXqxKy4fXe//2Ix/kopFEp80hKJE/bPt0U/rjyS32lqt7GV4S+ywbhz6tGILD5qg1AbyNCRN3IhDrBp9S98vIa1Iz/Y2YxQI8qCu3O//a3TlTSs/pmHTPqPP2LmbuUsST+nFDvP7YV0a9rmyVvWRmqZwmgsQNaNr/fwmP+MgfUVluQarhS/tHwEGAEyHOx7EoDsBAAAAAElFTkSuQmCC",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),toSymbolDrag:(new w({url:this.basePath+"/images/Directions/redPointMove.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0RDNTQyNTU2QzlCMTFFMkExREZEMUE4OEI2QURDNjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0RDNTQyNTY2QzlCMTFFMkExREZEMUE4OEI2QURDNjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3REM1NDI1MzZDOUIxMUUyQTFERkQxQTg4QjZBREM2MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3REM1NDI1NDZDOUIxMUUyQTFERkQxQTg4QjZBREM2MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PubpLUYAAAU3SURBVHjahFVbiFZVFF57n33Of5+LOWZFkOAMMQUh49jFyofGUIosIlBLgqCgB4NIEvNBItAHA6N6qhfTSkwxykZEfTFJLckixgsqli8zw4zaP//9nLMvrbXP/i+ORZtZs89eZ+1vf+tb69+HnVo1CDS8VABMeMAMLoI0cIBFRohVwPiIBjaA3hSACZnWl5iWR0HJ77SB35mS+BiBUQZNWywBt49+tO0mk1uZLXQHqUwW/CCF2AyMVBDHYV+jVl1aL5feg1p5FGM3ol3uBJgNulwF2Z09c+fenc0XAGHw9BiggUyMsQE+TkE2A4VsJqiWMi8Ub1x/mMnoVXx1rAnCOwCf5376wLw+BPR9MLUK6EoZNM71+f3w99KXoH5XP+h6BVRlBky1DNmUD/OQgBekD+D+52YzfdAw74veru681SgMwWiFbgPxwGKoP/GiDarfsxBAxiAungHG0ME41sGH3p7ewnQU7QKlH0fvGNcIYjjbVshlu5jBZ2SiwyqYGIHjGKKn1oLneS2LRl5B4Ah0hO8bNYwvA0eJCrlct9Zyq4oalukQBq9IeRxTRTCNFSQW+I9xDumvtoJJZUGt3gDenu2obxWICLICjZmwGEXGw9IcDxVipZRySBil1qU5FyZsYLbagSaARqPkE3/aM4glu3YegN7bAqI8KJGmw+kQlAKBRcWYdRyrOowcbToqioA99CSID/aBlihF0xBACNF61k3f1m9tvI4jUCiVRzjKDBPTBR4FISkxvBz81W/bokiRwlavOykSpjFutAMzglQm0XntOxBhu6kzR8BDtzF6gUBFclQQjc0tljxtA2lkt+2/pYEZSpLfcQj+dTy6AqonD4GmXtY6J7RUoU0LN8lThyE9uNjGlT5c34Sz/7s2fIy+t6ye9g+t+91Pklb7adRJgulr0xBMm7+kVH0+Vj888YOF6HpjC8Tnz4Jrxnb6F8669BNU8pU+ex8aJ0ZtARVeBoh3DVvKjMVKDwuqKILUjn8P9R8PtsBc7q1CtYeByZeHWgfQiOlCMZqa3+xtSJ2808lNo20abQPsU6t1Opf4qAMwhmLtHreXcLRhe9kfy+70rks42eN7S3wsVpJym+jCg5dvq8uVZ/vbMrhBLItS/zJXwGN0oSgUY3MlRonp1KapxKZ2bLzlZ0rrW+LQiH1ZWlE3E5735n15qClzVRoI0T/iE1nTLkbjynmQU+PgF3pgevdHUDy8z/oN/fpwpjYqxxoiDZtw6+6sYO1qHHtkHoGtRwW2dwme8hj878BEoCR1qJTGi4F/OnJ6qlO5dp1Hh+Ys8zn/vNvnCwP+38gRajgjzRVU7fVnfr15PGlg9+vr6HB69r6eqI8P5sRhZLsoYHCvBy68wyKkeDM2J3+bida8NlYcc/tbDJoLugIDtLSz4IG86N420LVnfuDdLzoIo/YwGamLmy6V1pyryBkijdZwRs/ScwzxSwk9aHPQeul5OtKZFIOrAxm+Is3xs2OLY6AYK/nNZGPL0RtRCeNyaBlHiI6mG0fxjtTTLihP9wkF7xyvXxsP9elQJQ1OM63J78CyLj7n9nvJRyZRSjn6NbSqm206yGh/VRFNfIEzrTtSnh1vP2ykpXZBpE/opGha+svJ+s+r7ggu5DkbnIn0BVq7uIabw4414WjhmEoHHrqiURq+0ypTlOZInzaDNON6km47BxA7ds399lvDW1dO+2XoNpXRimjTE5HaRXrSTGvnL7u40O1TzV7ls3rauNOUM2JTP16Mz+EVDDR3sGzG6M7Gp/GPAAMAKMYdXbFXj3QAAAAASUVORK5CYII\x3d",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),routeSymbol:(new J).setColor(new B([0,69,117,1])).setWidth(4),segmentSymbol:(new J).setColor(new B([0,122,194,1])).setWidth(8),printPage:"",showPrintPage:!0,showSegmentPopup:!0,showSegmentHighlight:!0,autoCenterAtSegmentStart:!0,showReverseStopsButton:!0,focusOnNewStop:!0,dragging:!0,canModifyStops:!0,directionsLengthUnits:null,traffic:!1,trafficLayer:null};this.defaults=e.mixin({},this.options,a);this._sortId="_dndId";this._stopReference=
"_dndStop";this._i18n=h;this.domNode=b},postCreate:function(){this.inherited(arguments);this.own(g(this._addDestinationNode,s,e.hitch(this,this._addStopButton)));this.own(g(this._optionsButtonNode,s,e.hitch(this,this._toggleOptionsMenu)));this.own(g(this._findOptimalOrderNode,s,e.hitch(this,this._toggleCheckbox)));this.own(g(this._returnToStartNode,s,e.hitch(this,this._toggleCheckbox)));this.own(g(this._useTrafficNode,s,e.hitch(this,this._toggleCheckbox)));this.own(g(this._useMilesNode,s,e.hitch(this,
this._toggleUnits)));this.own(g(this._useKilometersNode,s,e.hitch(this,this._toggleUnits)));this.own(g(this._getDirectionsButtonNode,s,e.hitch(this,this._directionsButton)));this.own(g(this._clearDirectionsButtonNode,s,e.hitch(this,this.clearDirections)));this._setWidgetProperties()},startup:function(){this._init()},destroy:function(){this._disconnectEvents();l.empty(this.domNode);this.inherited(arguments)},_destroyGeocoders:function(){var a=this.get("geocoders");if(a&&a.length)for(var b=0;b<a.length;b++)a[b]&&
a[b].destroy();this.set("geocoders",[])},_disconnectEvents:function(){this.clearDirections();var a;if(this._watchEvents&&this._watchEvents.length)for(a=0;a<this._watchEvents.length;a++)this._watchEvents[a].unwatch();if(this._onEvents&&this._onEvents.length)for(a=0;a<this._onEvents.length;a++)this._onEvents[a].remove();if(this._geocoderFindEvents&&this._geocoderFindEvents.length)for(a=0;a<this._geocoderFindEvents.length;a++)this._geocoderFindEvents[a].remove();if(this._geocoderWatchEvents&&this._geocoderWatchEvents.length)for(a=
0;a<this._geocoderWatchEvents.length;a++)this._geocoderWatchEvents[a].unwatch();if(this._geocoderSelectEvents&&this._geocoderSelectEvents.length)for(a=0;a<this._geocoderSelectEvents.length;a++)this._geocoderSelectEvents[a].remove();this._onEvents=[];this._watchEvents=[];this._geocoderSelectEvents=[];this._geocoderFindEvents=[];this._geocoderWatchEvents=[];this._disconnectResults();this._destroyGeocoders();this._destroyGlobalGeocoder();this._destroyDnD()},clearDirections:function(){this.get("routeParams")&&
this.get("routeParams").stops&&(this.get("routeParams").stops.features=[]);this.set("directions",null);this._clearStopGraphics();this._clearRouteGraphics();this._clearInfoWindow();this._clearResultsHTML();this._clearResultError();this._removeTrafficLayer();this.onDirectionsClear()},reset:function(){this._setWidgetProperties();this._init()},onLoad:function(){},onDirectionsStart:function(){k.add(this._widgetContainer,this._css.resultsLoadingClass);this._solveActive=!0},onDirectionsFinish:function(){k.remove(this._widgetContainer,
this._css.resultsLoadingClass);this._solveActive=!1},onDirectionsClear:function(){},onSegmentSelect:function(){},onSegmentHighlight:function(){},onStopsUpdate:function(){},removeStops:function(){this._clearResultError();return this._removeStops()},removeStop:function(a){this._clearResultError();return this._removeStop(a)},updateStops:function(a){this._clearResultError();return this._updateStops(a)},addStops:function(a,b){this._clearResultError();return this._addStops(a,b)},addStop:function(a,b){this._clearResultError();
return this._addStop(a,b)},updateStop:function(a,b){this._clearResultError();return this._updateStop(a,b)},getDirections:function(){this._clearResultError();this._directionsDeferred=new q;this._calculateValidStops()>=this.get("minStops")?this._solveActive||(this.onDirectionsStart(),this.clearDirections(),this._dnd.sync(),this._sortGeocoders(),this._getCandidates(this.get("stops")).then(e.hitch(this,function(a){this.stops=a;this._setStops();var b=this._validateStops(a);b.error?(a=h.widgets.directions.error.locator,
(b=this.get("geocoders")[b.index])&&(a=h.widgets.directions.error.unknownStop.replace("\x3cname\x3e",b.get("value"))),this._resultError(a),this._directionsDeferred.reject(a),this.onDirectionsFinish(Error([a]))):this._configureRoute()}),e.hitch(this,function(){this.onDirectionsFinish()}))):(this.clearDirections(),this._resultError(h.widgets.directions.error.notEnoughStops),this._directionsDeferred.reject(h.widgets.directions.error.notEnoughStops),this.onDirectionsFinish(Error([h.widgets.directions.error.notEnoughStops])));
return this._directionsDeferred.promise},unhighlightSegment:function(){this.get("map")&&(this.get("map").graphics&&this.get("showSegmentHighlight"))&&(this.get("map").graphics.remove(this._segmentGraphic),this._segmentGraphic=null)},highlightSegment:function(a){"undefined"===typeof a&&(a=0);a=this.get("directions").features[a];var b=new I(a.geometry),d=b.getPoint(0,0),f=b.getPoint(0,1);W.getLength(d,f)?b.getPoint(0,0):b=d;this.unhighlightSegment();(this._segmentGraphic=new v(b,this.get("segmentSymbol"),
a.attributes,this.get("segmentInfoTemplate")))&&this.get("map")&&this.get("map").graphics&&this.get("showSegmentHighlight")&&this.get("map").graphics.add(this._segmentGraphic)},zoomToSegment:function(a){"undefined"===typeof a&&(a=0);if(this.get("map")){var b=this.get("directions").features[a],d=(new I(b.geometry)).getExtent();this.get("map").setExtent(d,!0).then(e.hitch(this,function(){this._showSegmentPopup(b,a)}))}},centerAtSegmentStart:function(a){"undefined"===typeof a&&(a=0);if(this.get("map")){var b=
this.get("directions").features[a],d=b.geometry.getPoint(0,0);this.get("map").centerAt(d).then(e.hitch(this,function(){this._showSegmentPopup(b,a)}))}},zoomToFullRoute:function(){this.get("map")&&(this._clearInfoWindow(),this.unhighlightSegment(),this.get("map").setExtent(this.get("directions").extent,!0))},_createDnD:function(){this._dnd=new Q(this._dndNode,{skipForm:!0,withHandles:!0})},_destroyDnD:function(){l.empty(this._dndNode);this._dnd&&(this._dnd.destroy(),this._dnd=null)},_setGeocoderOptions:function(){var a=
{theme:this.get("theme")};this.defaults.geocoderOptions.autoComplete||(a.maxLocations=1);var b={map:this.get("map")};this.geocoderOptions=e.mixin(a,this.defaults.geocoderOptions,b)},_setDefaultUnits:function(){if(!this.get("directionsLengthUnits")){var a=r.KILOMETERS;this.defaults.routeParams.directionsLengthUnits?a=this.defaults.routeParams.directionsLengthUnits:this.defaults.routeParams.directionsLanguage&&(a="en"===this.defaults.routeParams.directionsLanguage?r.MILES:r.KILOMETERS);this.set("directionsLengthUnits",
a)}},_setTrafficOptions:function(){this.defaults.hasOwnProperty("showTrafficOption")?this.set("showTrafficOption",this.defaults.showTrafficOption):-1<this.get("routeTaskUrl").search(/^https?:\/\/route[^.]*\.arcgis\.com.*$/i)&&this.set("showTrafficOption",!0);-1<this.get("routeTaskUrl").search(/^https?:\/\/route[^.]*\.arcgis\.com.*$/i)&&(this.get("trafficLayer")||this.set("trafficLayer",new T(location.protocol+"//traffic.arcgis.com/arcgis/rest/services/World/Traffic/MapServer",{opacity:0.4})))},_updateCanModifyStops:function(){this.get("canModifyStops")?
m.set(this._addDestinationNode,"display","block"):m.set(this._addDestinationNode,"display","none")},_setWidgetProperties:function(){this._stopsReady=!1;this._disconnectEvents();this.set("loaded",!1);this.set("map",this.defaults.map);this.set("alphabet",this.defaults.alphabet);this.set("directions",this.defaults.directions);this.set("directionsLanguage",this.defaults.directionsLanguage);this.set("routeTaskUrl",this.defaults.routeTaskUrl);this.set("stops",[]);this.set("textSymbolFont",this.defaults.textSymbolFont);
this.set("textSymbolColor",this.defaults.textSymbolColor);this.set("textSymbolOffset",this.defaults.textSymbolOffset);this.set("fromSymbol",this.defaults.fromSymbol);this.set("fromSymbolDrag",this.defaults.fromSymbolDrag);this.set("stopSymbol",this.defaults.stopSymbol);this.set("stopSymbolDrag",this.defaults.stopSymbolDrag);this.set("toSymbol",this.defaults.toSymbol);this.set("toSymbolDrag",this.defaults.toSymbolDrag);this.set("routeSymbol",this.defaults.routeSymbol);this.set("segmentSymbol",this.defaults.segmentSymbol);
this.set("showPrintPage",this.defaults.showPrintPage);this.set("showSegmentPopup",this.defaults.showSegmentPopup);this.set("showSegmentHighlight",this.defaults.showSegmentHighlight);this.set("autoCenterAtSegmentStart",this.defaults.autoCenterAtSegmentStart);this.set("showReverseStopsButton",this.defaults.showReverseStopsButton);this.set("focusOnNewStop",this.defaults.focusOnNewStop);this.set("dragging",this.defaults.dragging);this.set("canModifyStops",this.defaults.canModifyStops);this.set("theme",
this.defaults.theme);this.set("showReturnToStartOption",this.defaults.showReturnToStartOption);this.set("showOptimalRouteOption",this.defaults.showOptimalRouteOption);this.set("optimalRoute",this.defaults.optimalRoute);this.set("returnToStart",this.defaults.returnToStart);this.set("traffic",this.defaults.traffic);this.set("trafficLayer",this.defaults.trafficLayer);this.set("minStops",this.defaults.minStops);this.set("maxStops",this.defaults.maxStops);this.set("printPage",this.defaults.printPage);
this.set("autoSolve",this.defaults.autoSolve);this.set("directionsLengthUnits",this.defaults.directionsLengthUnits);this.set("stopsInfoTemplate",this.defaults.stopsInfoTemplate);this.set("segmentInfoTemplate",this.defaults.segmentInfoTemplate);this.set("geocoders",[]);this._defaultSR=new S(4326);this._updateCanModifyStops()},_setStopsAttr:function(a){this._stopsReady?(a||(a=[]),this._updateStops(a),this._setStops()):this._set("stops",a)},_updateStops:function(a){this.stops||(this.stops=[]);a||(a=
[]);var b=this.stops.length;return a&&a.length?this._getCandidates(a).then(e.hitch(this,function(a){var f=a.length,c=0,c=0;if(f===b)for(c=0;c<f;c++)this._updateStopInsert(a[c],c);else if(f>b){if(b)for(c;c<b;c++)this._updateStopInsert(a[c],c);for(c;c<f;c++)this._insertStop(a[c],c)}else{for(var e=b-f,c=0;c<e;c++)this._removeStop();for(c=0;c<f;c++)this._updateStopInsert(a[c],c)}this._setStops()})):this._removeStops()},_removeStops:function(){var a=e.clone(this.get("stops")),b=new q;if(this.stops.length){for(;this.stops.length;)this._removeStop();
b.resolve(a)}else b.reject("no stops to remove");return b.promise},_removeStop:function(a){var b=new q;if(this.stops.length){"undefined"===typeof a&&(a=this.stops.length-1);var d=e.clone(this.stops[a]),f=this._dnd.getAllNodes()[a],c=this.get("geocoders");c[a].destroy();c.splice(a,1);this.set("geocoders",c);this.stops.splice(a,1);this._setStops();this._geocoderSelectEvents[f.id].remove();this._geocoderFindEvents[f.id].remove();this._geocoderWatchEvents[f.id].unwatch();l.destroy(f);this._dnd.sync();
this._stopsRemovable();this._optionsMenu();this._checkMaxStops();this._fixIcons();this._sortGeocoders();b.resolve(d,a)}else b.reject("no stop to remove");return b.promise},_removeTrafficLayer:function(){var a=this.get("trafficLayer"),b=this.get("map");a&&b&&b.removeLayer(a);this._trafficLayerAdded=!1},_addStops:function(a,b){"undefined"===typeof b&&(b=this.stops.length);var d=new q;a&&a.length?this._getCandidates(a).then(e.hitch(this,function(a){if(a&&a.length){for(var c=0;c<a.length;c++)this._insertStop(a[c],
b+c);this._setStops();d.resolve(a)}else this._resultError(h.widgets.directions.error.noAddresses),d.reject(h.widgets.directions.error.noAddresses)}),e.hitch(this,function(){this._resultError(h.widgets.directions.error.noAddresses);d.reject(h.widgets.directions.error.noAddresses)})):(this._resultError(h.widgets.directions.error.noStops),d.reject(h.widgets.directions.error.noStops));return d.promise},_addStop:function(a,b){"undefined"===typeof b&&(b=this.stops.length);var d=new q;this._checkMaxStops();
this.maxStopsReached?(this._resultError(h.widgets.directions.error.maximumStops),d.reject(h.widgets.directions.error.maximumStops)):this._getCandidate(a,b).then(e.hitch(this,function(a){this._insertStop(a,b);this._setStops();d.resolve(a,b)}),e.hitch(this,function(a){d.reject(a)}));return d.promise},_removeEmptyStops:function(){if(this.stops.length>this.get("minStops"))for(var a=this.stops.length-1;this.stops.length>this.get("minStops")&&-1<a;a--){var b=this.stops[a];(!b||!b.name)&&this.removeStop(a)}},
_setReverseGeocode:function(a){if(a.feature.geometry){var b={address:a.name};this._stopGraphics[this._dragGraphic._index]&&(this._stopGraphics[this._dragGraphic._index].setAttributes(b),this._stopGraphics[this._dragGraphic._index].setGeometry(a.feature.geometry));this._textGraphics[this._dragGraphic._index]&&(this._textGraphics[this._dragGraphic._index].setAttributes(b),this._textGraphics[this._dragGraphic._index].setGeometry(a.feature.geometry));this._moveInProgress||this._unsetDraggableObject(this._dragGraphic);
this.get("geocoders")[this._dragGraphic._index]&&this.get("geocoders")[this._dragGraphic._index].set("value",a.name);this.stops[this._dragGraphic._index]=a;this._setStops();this.get("autoSolve")&&(this._directionsDeferred=new q,this.set("directions",null),this._configureRouteOptions(),this.get("routeTask").solve(this.get("routeParams"),e.hitch(this,function(a){this._showRoute(a)}),e.hitch(this,function(a){this._routeTaskError(a)})))}},_insertStop:function(a,b){var d=this._dnd.getAllNodes(),f=!1,c=
!1,y=d.length;d[b]?(c=d[b],f=!0):f=c=!1;var p=l.create("tr",{className:this._css.stopClass}),d=l.create("td",{className:this._css.stopIconColumnClass},p);l.create("div",{className:this._css.stopIconClass+" dojoDndHandle",innerHTML:this._getLetter(y)},d);y=l.create("td",{className:this._css.esriStopGeocoderColumnClass},p);y=l.create("div",{},y);this.get("canModifyStops")&&(d=l.create("td",{className:this._css.stopIconRemoveColumnClass},p),l.create("div",{className:this._css.stopIconRemoveClass,role:"button",
"data-remove":"true"},d));this._dnd.insertNodes(!1,[p],f,c);this.stops.splice(b,0,a);f=e.mixin({},this.get("geocoderOptions"),{value:a.name});f=new G(f,y);f[this._sortId]=p.id;f[this._stopReference]=a;c=this.get("geocoders");c.splice(b,0,f);f.startup();this.set("geocoders",c);c=f.on("select",e.hitch(this,function(a){if(a.result){var b=this._dnd.getAllNodes(),b=t.indexOf(b,p);this.stops[b]=a.result;this._setStops();this.get("autoSolve")&&this.getDirections().then(e.hitch(this,function(){this.zoomToFullRoute()}))}}));
this._geocoderSelectEvents[p.id]=c;c=f.on("enter-key-select",e.hitch(this,function(a){if(a.result){var b=this._dnd.getAllNodes(),b=t.indexOf(b,p);this.stops[b]=a.result;this._setStops();this.get("autoSolve")&&this.getDirections().then(e.hitch(this,function(){this.zoomToFullRoute()}))}}));this._geocoderFindEvents[p.id]=c;c=f.watch("value",e.hitch(this,function(a,b,c){a=this._dnd.getAllNodes();a=t.indexOf(a,p);this.stops[a]&&c!==this.stops[a].name&&(this.stops[a]={name:c},this._setStops())}));this._geocoderWatchEvents[p.id]=
c;this._checkMaxStops();this._fixIcons();this.get("focusOnNewStop")&&f.focus();this._stopsRemovable();this._optionsMenu();this._sortGeocoders()},_validateStops:function(a){if(a)for(var b=0;b<a.length;b++)if(!a[b]||!a[b].feature||!a[b].extent)return{error:!0,index:b};return{error:!1}},_sortStops:function(){this.stops.length&&(this.stops.sort(e.hitch(this,function(a,b){for(var d,e,c=0;c<this.get("geocoders").length;c++)this.geocoders[c][this._stopReference]===a?d=c:this.geocoders[c][this._stopReference]===
b&&(e=c);return d>e?1:e>d?-1:0})),this._setStops())},_getCandidate:function(a,b){var d=new q,f=typeof a,c={name:""};a?"object"===f&&a.hasOwnProperty("feature")&&a.hasOwnProperty("name")?d.resolve(a):"object"===f&&a.hasOwnProperty("address")&&a.hasOwnProperty("location")?(f=this._globalGeocoder._hydrateResult(a),d.resolve(f)):"object"===f&&a.hasOwnProperty("name")&&!a.name?d.resolve(c):("object"===f&&a.hasOwnProperty("name")&&(a=a.name),this.get("geocoders")&&this.get("geocoders")[b]&&(c.name=this.get("geocoders")[b].get("value")),
this._globalGeocoder&&this._globalGeocoder.find(a).then(e.hitch(this,function(a){a.results&&a.results.length?d.resolve(a.results[0]):(a=h.widgets.directions.error.locator,this._resultError(a),d.reject(a))}),e.hitch(this,function(){var a=h.widgets.directions.error.locator;this._resultError(a);d.reject(a)}))):d.resolve(c);return d.promise},_updateStopInsert:function(a,b){this.get("geocoders")[b]&&(this.get("geocoders")[b].set("value",a.name),this.stops[b]=a,this._setStops())},_updateStop:function(a,
b){var d=new q;this.stops?("undefined"===typeof b&&(b=this.stops.length-1),this._getCandidate(a,b).then(e.hitch(this,function(a){this._updateStopInsert(a,b);d.resolve(a)}),e.hitch(this,function(a){d.reject(a)}))):d.reject("could not update stop");return d.promise},_renderDirections:function(){var a=this.get("directions"),b="";if(this._resultsNode){b+='\x3cdiv class\x3d"'+this._css.resultsRouteNameClass+'"\x3e';b+=a.routeName;b+="\x3c/div\x3e";b+='\x3cdiv class\x3d"'+this._css.clearClass+'"\x3e\x3c/div\x3e';
if(a.totalLength||a.totalTime){var d=this._formatDistance(a.totalLength,h.widgets.directions.units[this._getUnits(this.get("directionsLengthUnits"))].name),f=this._formatTime(a.totalTime),b=b+('\x3cdiv class\x3d"'+this._css.resultsSummaryClass+'"\x3e');d&&(b+=d);d&&f&&(b+=" \x26middot; ");f&&(b+=f);b+="\x3c/div\x3e"}b+='\x3cdiv class\x3d"'+this._css.clearClass+'"\x3e\x3c/div\x3e';b+='\x3cdiv class\x3d"'+this._css.resultsRouteButtonContainerClass+'"\x3e';b+='\x3cdiv tabindex\x3d"0" role\x3d"button" class\x3d"'+
this._css.resultsViewFullRouteClass+'" data-full-route\x3d"true"\x3e'+h.widgets.directions.viewFullRoute+"\x3c/div\x3e";this.get("showPrintPage")&&(b+='\x3cdiv tabindex\x3d"0" role\x3d"button" title\x3d"'+h.widgets.directions.print+'" class\x3d"'+this._css.resultsPrintClass+'" data-print-directions\x3d"true"\x3e\x3c/div\x3e');var b=b+('\x3cdiv class\x3d"'+this._css.clearClass+'"\x3e\x3c/div\x3e'),b=b+"\x3c/div\x3e",b=b+('\x3cdiv class\x3d"'+this._css.routesClass+'"\x3e'),b=b+('\x3ctable summary\x3d"'+
a.routeName+'"\x3e'),b=b+'\x3ctbody role\x3d"menu"\x3e',c=0;t.forEach(a.features,e.hitch(this,function(d,e){var f=this._css.routeClass;d.attributes&&(d.attributes.step=e+1);d.attributes.maneuverType&&(f+=" "+d.attributes.maneuverType);if(0===e||this._startReturn&&e+1===a.features.length)f+=" "+this._css.routeOriginClass;else if(e===a.features.length-1||this.get("stops").length-1===c&&("esriDMTStop"===d.attributes.maneuverType||"esriDMTDepart"===d.attributes.maneuverType))f+=" "+this._css.routeDestinationClass;
a.features.length===e+1&&(f+=" "+this._css.routeLastClass);b+='\x3ctr tabindex\x3d"0" role\x3d"menuitem" class\x3d"'+f+" "+this._css.routeZoomClass+'" data-segment\x3d"'+e+'"\x3e';b+='\x3ctd class\x3d"'+this._css.routeIconColumnClass+'"\x3e';b+='\x3cdiv class\x3d"'+this._css.routeIconClass+'"\x3e';0===e?(b+=this._getLetter(c),c++):"esriDMTStop"===d.attributes.maneuverType?b=this._startReturn&&e+1===a.features.length?b+this._getLetter(0):b+this._getLetter(c):"esriDMTDepart"===d.attributes.maneuverType&&
(b+=this._getLetter(c),c++);b+="\x3c/div\x3e";b+="\x3c/td\x3e";b+='\x3ctd class\x3d"'+this._css.routeTextColumnClass+'"\x3e';b+='\x3cdiv class\x3d"'+this._css.routeInfoClass+'"\x3e';b+='\x3cdiv class\x3d"'+this._css.routeTextClass+'"\x3e';var f=a.strings[e],g;if(f){var k=d.attributes.text;for(g=0;g<f.length;g++)k=this._boldText(k,f[g].string);d.attributes.formattedText=k}else d.attributes.formattedText=d.attributes.text;b+="\x3cstrong\x3e"+C.format(d.attributes.step)+".\x3c/strong\x3e "+d.attributes.formattedText;
b+="\x3c/div\x3e";f=this._formatDistance(d.attributes.length,h.widgets.directions.units[this._getUnits(this.get("directionsLengthUnits"))].abbr);g=this._formatTime(d.attributes.time);f&&(b+='\x3cdiv class\x3d"'+this._css.routeLengthClass+'"\x3e',b+=f,g&&(b+=" "+g),b+="\x3c/div\x3e");b+="\x3c/div\x3e";b+="\x3c/td\x3e";b+="\x3c/tr\x3e"}));b+="\x3c/tbody\x3e";b+="\x3c/table\x3e";b+="\x3c/div\x3e";this._resultsNode&&(this._resultsNode.innerHTML=b);this._disconnectResults();(d=u("[data-segment]",this._resultsNode))&&
d.length&&d.forEach(e.hitch(this,function(b){var c=g(b,E.enter,e.hitch(this,function(){var c=parseInt(n.get(b,"data-segment"),10);this.highlightSegment(c);this.onSegmentHighlight(a.features[c])}));this._resultEvents.push(c);c=g(b,"focusin",e.hitch(this,function(){var c=parseInt(n.get(b,"data-segment"),10);this.highlightSegment(c);this.onSegmentHighlight(a.features[c])}));this._resultEvents.push(c);c=g(b,"focusout",e.hitch(this,function(){this.unhighlightSegment()}));this._resultEvents.push(c);c=g(b,
E.leave,e.hitch(this,function(){this.unhighlightSegment()}));this._resultEvents.push(c);this.get("autoCenterAtSegmentStart")&&(c=g(b,"click, keydown",e.hitch(this,function(c){if(c&&("click"===c.type||"keydown"===c.type&&c.keyCode===x.ENTER))c=parseInt(n.get(b,"data-segment"),10),this.centerAtSegmentStart(c),this.onSegmentSelect(a.features[c])})),this._resultEvents.push(c))}))}},_showRoute:function(a){this.set("solveResult",a);var b=a.routeResults[0].directions;this.set("directions",b);this._clearInfoWindow();
this._clearResultError();var d=a.routeResults[0].stops;if(d&&d.length){var e=[],c;this._clearStopGraphics();var h=d.length;this._startReturn&&h--;for(c=0;c<h;c++){var g=d[c],g={extent:new V({xmin:g.geometry.x-0.25,ymin:g.geometry.y-0.25,xmax:g.geometry.x+0.25,ymax:g.geometry.y+0.25,spatialReference:g.geometry.spatialReference}),feature:g,name:g.attributes.Name};e.push(g)}this.stops=e;for(c=0;c<this.stops.length;c++)this._updateStop(this.stops[c],c);this._setStops();this._setRouteSymbols()}this._clearRouteGraphics();
this.set("mergedRouteGraphic",new v(b.mergedGeometry,this.get("routeSymbol")));this.get("map")&&this.get("map").graphics&&(this.get("map").graphics.add(this.get("mergedRouteGraphic")),(b=this.get("mergedRouteGraphic").getDojoShape())&&b.moveToBack());this._addRouteSymbols();this._renderDirections();this.onDirectionsFinish(a);this._directionsDeferred.resolve(a)},_setGeocodersStopReference:function(){if(this.geocoders)for(var a=0;a<this.geocoders.length;a++)this.geocoders[a]&&this.stops[a]&&(this.geocoders[a][this._stopReference]=
this.stops[a])},_setStops:function(){this._setGeocodersStopReference();this._set("stops",this.stops);this.onStopsUpdate(this.stops)},_getCandidates:function(a){var b=[];if(a&&a.length){for(var d=0;d<a.length;d++)b.push(this._getCandidate(a[d],d));return P(b)}a=new q;a.resolve([]);return a.promise},_clearResultsHTML:function(){this._resultsNode&&(this._resultsNode.innerHTML="")},_showSegmentPopup:function(a){if(a&&this.get("showSegmentPopup")&&this.get("map")&&this.get("map").infoWindow){var b=a.geometry.getPoint(0,
0);a=new v(b,null,a.attributes,this.get("segmentInfoTemplate"));this.get("map").infoWindow.setFeatures([a]);this.get("map").infoWindow.show(b)}},_removeStopButton:function(a){this.stops.length>this.get("minStops")&&this.removeStop(a)},_addStopButton:function(){this.addStop()},_sortGeocoders:function(){var a=this._dnd.getAllNodes();this.geocoders.sort(e.hitch(this,function(b,d){return this._sortGeocodersToNodes(b,d,a,this._sortId)}));this._sortStops()},_disconnectResults:function(){if(this._resultEvents&&
this._resultEvents.length)for(var a=0;a<this._resultEvents.length;a++)this._resultEvents[a]&&this._resultEvents[a].remove();this._resultEvents=[]},_formatTime:function(a){var b,d="";b=Math.round(a);a=Math.floor(b/60);b=Math.floor(b%60);a&&(d+=a+" ",d=1<a?d+h.widgets.directions.time.hours:d+h.widgets.directions.time.hour);a&&b&&(d+=" ");b&&(d+=b+" ",d=1<b?d+h.widgets.directions.time.minutes:d+h.widgets.directions.time.minute);return d},_formatDistance:function(a,b){var d=Math.round(100*a)/100;return 0===
d?"":C.format(d)+" "+b},_setMoveSymbol:function(a){this._moveSymbolSet=!0;var b=this._setStopSymbol(a._index,this._stopGraphics.length,!0);a.setSymbol(b)},_unsetMoveSymbol:function(a){var b=this._setStopSymbol(a._index,this._stopGraphics.length);a.setSymbol(b);this._moveSymbolSet=!1},_removeTextGraphic:function(a){a=this._textGraphics[a];this.get("map").graphics.remove(a)},_setDraggableObject:function(a){a._drag&&(this.get("map")&&this.get("map").graphics)&&(this._removeTextGraphic(a._index),this._dragGraphic=
a,this._dragGeometry=a.geometry,this._edit.activate(K.MOVE,a))},_setTextGraphic:function(a){if(a._drag&&this.get("map")&&this.get("map").graphics){var b=this._textGraphics[a._index];b.setGeometry(a.geometry);this.get("map").graphics.add(b);(a=b.getDojoShape())&&a.moveToFront()}},_unsetDraggableObject:function(a){a._drag&&(this._moveSymbolSet&&this._unsetMoveSymbol(a),this._setTextGraphic(a),this._edit.deactivate())},_editToolbar:function(){this.get("map")?this._edit=new K(this.get("map")):this._edit=
null},_destroyGlobalGeocoder:function(){this._globalGeocoder&&(this._globalGeocoder.destroy(),this._globalGeocoder=null)},_createGlobalGeocoder:function(){var a=new q;this._globalGeocoder=new G(this.get("geocoderOptions"),l.create("div"));g.once(this._globalGeocoder,"load",e.hitch(this,function(){a.resolve()}));this._globalGeocoder.startup();return a.promise},_init:function(){if(this.get("map"))if(this.get("map").loaded)this._configure();else g.once(this.get("map"),"load",e.hitch(this,function(){this._configure()}));
else this._configure()},_setDefaultStops:function(){this.defaults.stops&&this.defaults.stops.length&&this.updateStops(this.defaults.stops).then(e.hitch(this,function(){this.get("focusOnNewStop")&&(this.get("geocoders")&&this.get("geocoders").length)&&this.get("geocoders")[0].focus()}))},_configure:function(){this._createDnD();this._setGeocoderOptions();this._createGlobalGeocoder().then(e.hitch(this,function(){this._editToolbar();this._createRouteTask();this._setDefaultUnits();this._setTrafficOptions();
this._setMenuNodeValues();this._setupEvents();this._stopsReady=!0;this._setDefaultStops();this.set("loaded",!0);this.onLoad()}))},_calculateValidStops:function(){for(var a=0,b=this.stops,d=0;d<b.length;d++)b[d]&&b[d].name&&a++;return a},_setStopSymbol:function(a,b,d){return 0===a?d&&this.get("fromSymbolDrag")?this.get("fromSymbolDrag"):this.get("fromSymbol"):a===b-1?d&&this.get("toSymbolDrag")?this.get("toSymbolDrag"):this.get("toSymbol"):d&&this.get("stopSymbolDrag")?this.get("stopSymbolDrag"):this.get("stopSymbol")},
_setRouteSymbols:function(){for(var a=this.get("stops"),b=0;b<a.length;b++){var d=a[b];if(d&&d.feature){var e=this._setStopSymbol(b,a.length),c=this._defaultSR;this.get("map")&&(c=this.get("map").spatialReference);var c=new U(d.feature.geometry.x,d.feature.geometry.y,c),g=this._getLetter(b),g=new X(g,this.get("textSymbolFont"),this.get("textSymbolColor"));this.get("textSymbolOffset")&&g.setOffset(this.get("textSymbolOffset").x,this.get("textSymbolOffset").y);g=new v(c,g);g._textGraphic=!0;g._index=
b;d=new v(c,e,{address:d.name},this.get("stopsInfoTemplate"));d._drag=!0;d._index=b;this._stopGraphics[b]=d;this._textGraphics[b]=g}}},_addRouteSymbols:function(){if(this._stopGraphics.length&&this.get("map")&&this.get("map").graphics)for(var a=0;a<this._stopGraphics.length;a++){this.get("map").graphics.add(this._stopGraphics[a]);var b=this._stopGraphics[a].getDojoShape();b&&b.moveToFront();this.get("map").graphics.add(this._textGraphics[a]);(b=this._textGraphics[a].getDojoShape())&&b.moveToFront()}},
_addTrafficLayer:function(){var a=this.get("trafficLayer"),b=this.get("map");b&&(a&&!this._trafficLayerAdded)&&(b.addLayer(a),a.show(),this._trafficLayerAdded=!0)},_toggleUnits:function(a){a.target===this._useMilesNode?this.set("directionsLengthUnits",r.MILES):a.target===this._useKilometersNode&&this.set("directionsLengthUnits",r.KILOMETERS)},_toggleCheckbox:function(a){var b=n.get(a.target,"checked");a.target===this._findOptimalOrderNode?this.set("optimalRoute",b):a.target===this._useTrafficNode?
this.set("traffic",b):a.target===this._returnToStartNode&&this.set("returnToStart",b)},_configureRouteOptions:function(){var a=this.get("routeParams");a.directionsLengthUnits=this.get("directionsLengthUnits");a.findBestSequence=this.get("optimalRoute");a.returnStops=a.findBestSequence?!0:!1;this.get("traffic")?(a.startTime=new Date,a.startTimeIsUTC=!0,this._addTrafficLayer()):(a.startTime=null,a.startTimeIsUTC=null,this._removeTrafficLayer());if(this.get("returnToStart")&&this._stopGraphics.length){var b=
new v(this._stopGraphics[0].geometry,null,this._stopGraphics[0].attributes),d=this._stopGraphics.slice(0);this._startReturn=b;d.push(b);a.stops.features=d}else this._startReturn=null,a.stops.features=this._stopGraphics;this.set("routeParams",a)},_configureRoute:function(){this._setRouteSymbols();this._configureRouteOptions();this.set("directions",null);this.routeTask.solve(this.routeParams,e.hitch(this,function(a){this._showRoute(a)}),e.hitch(this,function(a){this._routeTaskError(a)}))},_boldText:function(a,
b){return a.replace(RegExp("(^|\\s)("+b+")(\\s|$)","ig"),"$1\x3cstrong\x3e$2\x3c/strong\x3e$3")},_clearStopGraphics:function(){if(this._stopGraphics&&this._stopGraphics.length&&this.get("map")&&this.get("map").graphics)for(var a=0;a<this._stopGraphics.length;a++)this.get("map").graphics.remove(this._stopGraphics[a]),this.get("map").graphics.remove(this._textGraphics[a]);this._stopGraphics=[];this._textGraphics=[]},_clearRouteGraphics:function(){this.get("mergedRouteGraphic")&&(this.get("map")&&this.get("map").graphics)&&
(this.get("map").graphics.remove(this.get("mergedRouteGraphic")),this.set("mergedRouteGraphic",null));this.unhighlightSegment()},_clearInfoWindow:function(){this.get("map")&&this.get("map").infoWindow&&(this.get("map").infoWindow.hide(),this.get("map").infoWindow.features&&this.get("map").infoWindow.clearFeatures())},_getLetter:function(a){var b=this.get("alphabet"),d="";b&&b.length&&(a||(a=0),a>=b.length&&(a=b.length-1),"string"===typeof b?d=b.substr(a,1):b instanceof Array&&(d=b[a]));return d},
_directionsButton:function(){this._removeEmptyStops();this.getDirections().then(e.hitch(this,function(){this.zoomToFullRoute()}))},_fixIcons:function(){var a,b=this._dnd.getAllNodes();for(a=0;a<b.length;a++){var d=u("."+this._css.stopIconClass,b[a])[0];d&&(d.innerHTML=this._getLetter(a));k.remove(b[a],this._css.stopOriginClass+" "+this._css.stopDestinationClass);0===a?k.add(b[a],this._css.stopOriginClass):a===b.length-1&&k.add(b[a],this._css.stopDestinationClass)}a=u("[data-reverse-td]",this._dndNode)[0];
l.destroy(a);this.get("showReverseStopsButton")&&l.create("td",{"data-reverse-td":"true",rowspan:b.length,className:this._css.esriStopReverseColumnClass,innerHTML:'\x3cdiv role\x3d"button" class\x3d"'+this._css.reverseStopsClass+'" data-reverse-stops\x3d"true" title\x3d"'+h.widgets.directions.reverseDirections+'"\x3e\x3c/div\x3e'},b[0])},_setupEvents:function(){var a=g(this._dndNode,"[data-reverse-stops]:click, [data-reverse-stops]:keydown",e.hitch(this,function(a){a&&("click"===a.type||"keydown"===
a.type&&a.keyCode===x.ENTER)&&this._reverseStops()}));this._onEvents.push(a);a=g(this._resultsNode,"[data-print-directions]:click, [data-print-directions]:keydown",e.hitch(this,function(a){a&&("click"===a.type||"keydown"===a.type&&a.keyCode===x.ENTER)&&this._printDirections()}));this._onEvents.push(a);a=g(this._resultsNode,"[data-full-route]:click, [data-full-route]:keydown",e.hitch(this,function(a){a&&("click"===a.type||"keydown"===a.type&&a.keyCode===x.ENTER)&&this.zoomToFullRoute()}));this._onEvents.push(a);
a=g(this._dndNode,"[data-remove]:click, [data-remove]:keydown",e.hitch(this,function(a){if(a&&("click"===a.type||"keydown"===a.type&&a.keyCode===x.ENTER)){var d=u("[data-remove]",this._dndNode);a=t.indexOf(d,a.target);this._removeStopButton(a)}}));this._onEvents.push(a);a=g(this._dnd,"Drop",e.hitch(this,function(){this._dnd.sync();this._sortGeocoders();this._fixIcons();this._calculateValidStops()===this.get("geocoders").length&&this.get("routeParams").stops.features.length&&this.get("autoSolve")&&
this.getDirections().then(e.hitch(this,function(){this.zoomToFullRoute()}))}));this._onEvents.push(a);a=g(this._dnd,"DndStart",e.hitch(this,function(){var a=u("body")[0];k.add(a,this._css.dndDragBodyClass)}));this._onEvents.push(a);a=g(this._dnd,"DndDrop, DndCancel",e.hitch(this,function(){var a=u("body")[0];k.remove(a,this._css.dndDragBodyClass)}));this._onEvents.push(a);this.get("map")&&this.get("map").graphics&&(a=this.get("map").graphics.on("mouse-over",e.hitch(this,function(a){if(this.get("dragging")){var d;
a.graphic._drag?(d=this._edit.getCurrentState(),d.graphic||this._setDraggableObject(a.graphic),this._moveSymbolSet||this._setMoveSymbol(a.graphic)):a.graphic._textGraphic&&(d=this._edit.getCurrentState(),this._stopGraphics[a.graphic._index]&&(d.graphic||this._setDraggableObject(this._stopGraphics[a.graphic._index]),this._moveSymbolSet||this._setMoveSymbol(this._stopGraphics[a.graphic._index])))}})),this._onEvents.push(a),a=this.get("map").graphics.on("mouse-out",e.hitch(this,function(a){this.get("dragging")&&
!this._moveInProgress&&a.graphic._drag&&this._unsetDraggableObject(a.graphic)})),this._onEvents.push(a),a=g(this._edit,"graphic-click",e.hitch(this,function(a){this.get("map")&&this.get("map").infoWindow&&(this.get("map").infoWindow.setFeatures([a.graphic]),this.get("map").infoWindow.show(a.graphic.geometry))})),this._onEvents.push(a),a=g(this._edit,"graphic-first-move",e.hitch(this,function(){this._moveInProgress=!0})),this._onEvents.push(a),a=g(this._edit,"graphic-move-stop",e.hitch(this,function(a){this._moveInProgress=
!1;this._unsetDraggableObject(a.graphic);this._dragGeometry!==a.graphic.geometry&&(this._currentEditableGraphic=a.graphic,this.get("autoSolve")&&(this.onDirectionsStart(),this._clearInfoWindow(),this._clearResultsHTML()),this._globalGeocoder.find(a.graphic.geometry).then(e.hitch(this,function(a){a&&a.results.length?this._setReverseGeocode(a.results[0]):this._reverseGeocodeError(Error(h.widgets.directions.error.locator))}),e.hitch(this,function(a){this._reverseGeocodeError(a)})))})),this._onEvents.push(a));
a=this.watch("theme",this._updateThemeWatch);this._watchEvents.push(a);a=this.watch("canModifyStops",this._updateCanModifyStops);this._watchEvents.push(a);a=this.watch("showReturnToStartOption",this._optionsMenu);this._watchEvents.push(a);a=this.watch("showOptimalRouteOption",this._optionsMenu);this._watchEvents.push(a);a=this.watch("returnToStart",this._setMenuNodeValues);this._watchEvents.push(a);a=this.watch("optimalRoute",this._setMenuNodeValues);this._watchEvents.push(a);a=this.watch("routeTaskUrl",
e.hitch(this,function(){this._createRouteTask();this._setTrafficOptions()}));this._watchEvents.push(a);a=this.watch("routeParams",e.hitch(this,function(){this._createRouteParams();this._setDefaultUnits()}));this._watchEvents.push(a);a=this.watch("geocoderOptions",e.hitch(this,function(){this._setGeocoderOptions();this._createGlobalGeocoder()}));this._watchEvents.push(a);a=this.watch("showReverseStopsButton",this._fixIcons);this._watchEvents.push(a);a=this.watch("showPrintPage",this._renderDirections);
this._watchEvents.push(a);a=this.watch("trafficLayer",this._trafficLayerUpdate);this._watchEvents.push(a)},_trafficLayerUpdate:function(a,b,d){a=this.get("map");b&&(a&&this._trafficLayerAdded)&&(a.removeLayer(b),this._trafficLayerAdded=!1);d&&(a&&this.get("traffic")&&!this._trafficLayerAdded)&&(a.addLayer(d),d.show(),this._trafficLayerAdded=!0)},_reverseGeocodeError:function(a){this.onDirectionsFinish(a);a=h.widgets.directions.error.locator;this._resultError(a);this._clearRouteGraphics();this._currentEditableGraphic.setAttributes({error:a});
this._updateStop({name:""},this._currentEditableGraphic._index)},_routeTaskError:function(a){this._resultError(h.widgets.directions.error.routeTask);this._directionsDeferred.reject(a);this.onDirectionsFinish(a)},_clearResultError:function(){this._errors=[];this._errorNode&&(this._errorNode.innerHTML="")},_resultError:function(a){var b="";this._errors.push(a);b+='\x3cdiv class\x3d"'+this._css.routesErrorClass+'"\x3e';if(this._errors.length){b+="\x3cul\x3e";for(a=0;a<this._errors.length;a++)b+="\x3cli\x3e"+
this._errors[a]+"\x3c/li\x3e";b+="\x3c/ul\x3e"}this._errorNode&&(this._errorNode.innerHTML=b+"\x3c/div\x3e")},_getUnits:function(a){switch(a){case r.KILOMETERS:return"KILOMETERS";case r.METERS:return"METERS";case r.NAUTICAL_MILES:return"NAUTICAL_MILES";default:return"MILES"}},_createRouteTask:function(){this.set("routeTask",new $(this.get("routeTaskUrl")));this._createRouteParams()},_createRouteParams:function(){var a={directionsOutputType:"complete",stops:new Z,returnDirections:!0,doNotLocateOnRestrictedElements:!0};
this.get("map")?a.outSpatialReference=this.get("map").spatialReference:a.outSpatialReference=this._defaultSR;this.get("routeParams")||(this.routeParams={});var b=new aa;this.routeParams=e.mixin(b,{returnRoutes:!1},this.get("routeParams"),a)},_reverseStops:function(){var a=this._dnd.getAllNodes();a.length&&(a.reverse(),this._dnd.clearItems(),this._dnd.insertNodes(!1,a),this._dnd.sync(),this._stopsRemovable(),this._optionsMenu(),this._checkMaxStops(),this._fixIcons(),this._sortGeocoders(),this.get("autoSolve")&&
this.getDirections().then(e.hitch(this,function(){this.zoomToFullRoute()})))},_sortGeocodersToNodes:function(a,b,d,e){b=b[e];a=F.byId(a[e]);e=F.byId(b);a=t.indexOf(d,a);e=t.indexOf(d,e);for(b=0;b<d.length;b++){if(b===a)return-1;if(b===e)return 1}},_setMenuNodeValues:function(){var a=this.get("optimalRoute");this._findOptimalOrderNode&&n.set(this._findOptimalOrderNode,"checked",a);a=this.get("returnToStart");this._returnToStartNode&&n.set(this._returnToStartNode,"checked",a);a=this.get("traffic");
this._useTrafficNode&&n.set(this._useTrafficNode,"checked",a);switch(this.get("directionsLengthUnits")){case r.KILOMETERS:n.set(this._useKilometersNode,"checked",!0);n.set(this._useMilesNode,"checked",!1);break;case r.MILES:n.set(this._useKilometersNode,"checked",!1),n.set(this._useMilesNode,"checked",!0)}},_optionsMenu:function(){this._useTrafficItemNode&&(this.get("showTrafficOption")?m.set(this._useTrafficItemNode,"display","block"):m.set(this._useTrafficItemNode,"display","none"));this._returnToStartItemNode&&
(this.get("showReturnToStartOption")?m.set(this._returnToStartItemNode,"display","block"):m.set(this._returnToStartItemNode,"display","none"));this._findOptimalOrderItemNode&&(this.get("showOptimalRouteOption")&&4<=this.stops.length?m.set(this._findOptimalOrderItemNode,"display","block"):m.set(this._findOptimalOrderItemNode,"display","none"));this.stops.length>=this.get("minStops")?k.add(this._widgetContainer,this._css.stopsOptionsOptionsEnabledClass):(k.remove(this._widgetContainer,this._css.stopsOptionsOptionsEnabledClass),
this._optionsMenuNode&&"block"===m.get(this._optionsMenuNode,"display")&&this._toggleOptionsMenu(),this._configureRouteOptions())},_stopsRemovable:function(){this.get("geocoders").length>this.get("minStops")?k.add(this._widgetContainer,this._css.stopsRemovableClass):k.remove(this._widgetContainer,this._css.stopsRemovableClass)},_checkMaxStops:function(){this.stops.length<this.get("maxStops")?(this._showAddDestination(),this.set("maxStopsReached",!1)):(this._hideAddDestination(),this.set("maxStopsReached",
!0))},_updateThemeWatch:function(a,b,d){k.remove(this.domNode,b);k.add(this.domNode,d)},_toggleOptionsMenu:function(){this._optionsMenuNode&&("block"===m.get(this._optionsMenuNode,"display")?(m.set(this._optionsMenuNode,"display","none"),this._optionsButtonNode.innerHTML=h.widgets.directions.showOptions):(m.set(this._optionsMenuNode,"display","block"),this._optionsButtonNode.innerHTML=h.widgets.directions.hideOptions))},_hideAddDestination:function(){k.remove(this._widgetContainer,this._css.addStopsClass)},
_showAddDestination:function(){k.add(this._widgetContainer,this._css.addStopsClass)},_getAbsoluteUrl:function(){var a=D.toUrl("esri/dijit");if(/^https?\:/i.test(a))return a;if(/^\/\//i.test(a))return window.location.protocol+a;if(/^\//i.test(a))return window.location.protocol+"//"+window.location.host+a},_getManeuverImage:function(a){if(a){var b=this._getAbsoluteUrl()+"/images/Directions/maneuvers/";return"esriDMTStop"===a||"esriDMTDepart"===a?"":b+a+".png"}return""},_loadPrintDirections:function(){var a=
this._getAbsoluteUrl()+"/css/Directions.css",b=this._getAbsoluteUrl()+"/css/DirectionsPrint.css",d=this._getAbsoluteUrl()+"/images/Directions/print-logo.png",f;f=N.isBodyLtr()?"ltr":"rtl";var c="",c=c+"\x3c!DOCTYPE HTML\x3e",c=c+('\x3chtml lang\x3d"en" class\x3d"'+this.get("theme")+'" dir\x3d"'+f+'"\x3e'),c=c+"\x3chead\x3e",c=c+'\x3cmeta charset\x3d"utf-8"\x3e',c=c+'\x3cmeta http-equiv\x3d"X-UA-Compatible" content\x3d"IE\x3dEdge,chrome\x3d1"\x3e',c=c+("\x3ctitle\x3e"+this.get("directions").routeName+
"\x3c/title\x3e"),c=c+('\x3clink rel\x3d"stylesheet" media\x3d"screen" type\x3d"text/css" href\x3d"'+a+'" /\x3e'),c=c+('\x3clink rel\x3d"stylesheet" media\x3d"print" type\x3d"text/css" href\x3d"'+b+'" /\x3e'),c=c+"\x3c/head\x3e",c=c+('\x3cbody class\x3d"'+this._css.esriPrintPageClass+'"\x3e'),c=c+('\x3cdiv class\x3d"'+this._css.esriPrintBarClass+'"\x3e'),c=c+('\x3cdiv class\x3d"'+this._css.esriCloseButtonClass+'" title\x3d"'+h.common.close+'" onclick\x3d"window.close();"\x3e'+h.common.close+"\x3c/div\x3e"),
c=c+('\x3cdiv id\x3d"printButton" class\x3d"'+this._css.esriPrintButtonClass+'" title\x3d"'+h.widgets.directions.print+'" onclick\x3d"window.print();"\x3e'+h.widgets.directions.print+"\x3c/div\x3e"),c=c+"\x3c/div\x3e",c=c+('\x3cdiv class\x3d"'+this._css.esriPrintMainClass+'"\x3e'),c=c+('\x3cdiv class\x3d"'+this._css.esriPrintHeaderClass+'"\x3e'),c=c+('\x3cimg class\x3d"'+this._css.esriPrintLogoClass+'" src\x3d"'+d+'" /\x3e'),c=c+('\x3cdiv class\x3d"'+this._css.esriPrintNameClass+'"\x3e'+this.get("directions").routeName+
"\x3c/div\x3e"),c=c+('\x3cdiv class\x3d"'+this._css.esriPrintLengthClass+'"\x3e'+this._formatDistance(this.get("directions").totalLength,h.widgets.directions.units[this._getUnits(this.get("directionsLengthUnits"))].name)+". "+this._formatTime(this.get("directions").totalTime)+"\x3c/div\x3e"),c=c+'\x3cdiv id\x3d"print_helper"\x3e\x3c/div\x3e',c=c+('\x3ctextarea onkeyup\x3d"document.getElementById(\'print_helper\').innerHTML\x3dthis.value;" id\x3d"print_area" class\x3d"'+this._css.esriPrintNotesClass+
'" placeholder\x3d"'+h.widgets.directions.printNotes+'"\x3e\x3c/textarea\x3e'),c=c+('\x3cdiv class\x3d"'+this._css.clearClass+'"\x3e\x3c/div\x3e'),c=c+"\x3c/div\x3e",c=c+('\x3cdiv class\x3d"'+this._css.esriPrintDirectionsClass+'"\x3e'),c=c+"\x3ctable\x3e",c=c+"\x3ctbody\x3e",g=0;t.forEach(this.get("directions").features,e.hitch(this,function(a,b){var d=this.get("directions").strings[b],e;if(d){var f=a.attributes.text;for(e=0;e<d.length;e++)f=this._boldText(f,d[e].string);a.attributes.formattedText=
f}else a.attributes.formattedText=a.attributes.text;d="";this.get("directions").features.length===b+1&&(d=this._css.routeLastClass);a.attributes&&(a.attributes.step=b+1);c+='\x3ctr class\x3d"'+d+'"\x3e';c+='\x3ctd class\x3d"'+this._css.routeIconColumnClass+'"\x3e';var d=this._getManeuverImage(a.attributes.maneuverType),k;0===b?(k=this._getLetter(g),g++):"esriDMTStop"===a.attributes.maneuverType?k=this._getLetter(g):"esriDMTDepart"===a.attributes.maneuverType&&(k=this._getLetter(g),g++);d?c+='\x3cimg src\x3d"'+
d+'" /\x3e':k&&(c+='\x3cdiv class\x3d"'+this._css.esriPrintStopLabelClass+'"\x3e',c+=k,c+="\x3c/div\x3e");c+="\x3c/td\x3e";c+='\x3ctd class\x3d"'+this._css.routeTextColumnClass+'"\x3e';c+="\x3cdiv\x3e\x3cstrong\x3e"+C.format(a.attributes.step)+".\x3c/strong\x3e "+a.attributes.formattedText+"\x3c/div\x3e";c+="\x3c/td\x3e";c+='\x3ctd class\x3d"'+this._css.routeTextColumnClass+'"\x3e';c+='\x3cdiv class\x3d"'+this._css.routeLengthClass+'"\x3e'+this._formatDistance(a.attributes.length,h.widgets.directions.units[this._getUnits(this.get("directionsLengthUnits"))].abbr)+
"\x3c/div\x3e";c+="\x3c/td\x3e";c+="\x3c/tr\x3e"}));c+="\x3c/tbody\x3e";c+="\x3c/table\x3e";c+="\x3c/div\x3e";c+='\x3cdiv class\x3d"'+this._css.esriPrintFooterClass+'"\x3e';c+="\x3cp\x3e"+h.widgets.directions.printDisclaimer+"\x3c/p\x3e";c+="\x3c/div\x3e";c+="\x3c/div\x3e";c+="\x3c/body\x3e";c+="\x3c/html\x3e";this._printWindow.document.open("text/html","replace");this._printWindow.document.write(c);this._printWindow.document.close()},_printDirections:function(){var a=screen.width/2,b=screen.height/
1.5,a="toolbar\x3dno, location\x3dno, directories\x3dno, status\x3dyes, menubar\x3dno, scrollbars\x3dyes, resizable\x3dyes, width\x3d"+a+", height\x3d"+b+", top\x3d"+(screen.height/2-b/2)+", left\x3d"+(screen.width/2-a/2);this.get("printPage")?(window.directions=this.get("directions"),window.open(this.get("printPage"),"directions_widget_print",a,!0)):(this._printWindow=window.open("","directions_widget_print",a,!0),this._loadPrintDirections())}});M("extend-esri")&&e.setObject("dijit.Directions",z,
R);return z});